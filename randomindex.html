<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body>
      
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script defer type="text/javascript">
        // $.ajax({
        //     url: "https://cors-anywhere.herokuapp.com/https://en.wikipedia.org/wiki/Comparison_of_web_frameworks",
        //     method: "GET"
        // }).then(function(res) {
        //     //create a jquery object with the response that we get 
        //     var html = $(res);
        //     var javaHeader = html.find("#Java");  
        //     var javaTableRows = javaHeader.parent().next().next().children("tbody").children("tr");
        //     javaTableRows.each(function(i){
        //         //skip the first header that says "Project"
        //         if (i != 0) {
        //             //get the text content of each row that we found, aka each framework
        //             var currentRow = $(this).find("th:nth-child(1)");
        //             var frameworkName = currentRow.text();
        //             var frameworkLink = "https://en.wikipedia.org" + currentRow.children("a").attr("href");
        //             console.log(frameworkLink);
        //             console.log(frameworkName);
        //         }
        //     })
        //     console.log(javaHeader.text());
        //     console.log(javaTableRows);
        //     // console.log(html);
        //     // $(res).find("ul").find("li").each
        // });
        var results;
        function getFrameworkInfo(wikipediaTableHeaderName, array) {
            //everything inside of this function works, we just need to figure out the return of the array
            console.log("hey")
            var frameworkInfo = [];
            $.ajax({
            url: "https://cors-anywhere.herokuapp.com/https://en.wikipedia.org/wiki/Comparison_of_web_frameworks",
            method: "GET"
            }).then(function(res) {
                //create a jquery object with the response that we get 
                var html = $(res);
                //use the param to create an id tag
                var id = "#" + wikipediaTableHeaderName.replace(" ", "_");
                console.log(id);
                var javaHeader = html.find(id);  
                console.log(javaHeader)
                var javaTableRows = javaHeader.parent().next().next().children("tbody").children("tr");
                javaTableRows.each(function(i){
                    //skip the first header that says "Project"
                    if (i != 0) {
                        //get the text content of each row that we found, aka each framework
                        var currentRow = $(this).find("th:nth-child(1)");
                        var frameworkName = currentRow.text();
                        var frameworkLink = "https://en.wikipedia.org" + currentRow.children("a").attr("href");
                        frameworkInfo.push({
                            name: frameworkName,
                            link: frameworkLink
                        });

                        console.log(frameworkLink);
                        console.log(frameworkName);

                    }
                });
            });

            return frameworkInfo;
            
        }

        results = getFrameworkInfo("Java");
        console.log(results);
    </script>
</body>
</html>